name: Update Raw VPN Configs

on:
  schedule:
    - cron: "*/10 * * * *"  # ÐšÐ°Ð¶Ð´Ñ‹Ðµ 10 Ð¼Ð¸Ð½ÑƒÑ‚
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - uses: actions/checkout@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.8"

      - name: Install dependencies
        run: pip install pybase64 requests pyyaml geoip2

      - name: Run config script from /website
        run: |
          cd website
          python update_raw_configs.py
          cd ..

      - name: Write README.md
        run: |
          cat > README.md << 'EOF'
# ðŸŒ ASTRACAT VPN (Free V2Ray/VLESS via GitHub)

ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÑŽÑ‚ÑÑ **Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 10 Ð¼Ð¸Ð½ÑƒÑ‚** Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÑŽÑ‚ÑÑ Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ **Clash / Karing VPN**.

ðŸ“¦ **ÐŸÑ€ÑÐ¼Ð°Ñ ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° YAML-ÐºÐ¾Ð½Ñ„Ð¸Ð³:**  
\`\`\`
https://raw.githubusercontent.com/ASTRACAT2022/VPN-FREE-astra.net-V1/refs/heads/main/website/configs/raw_configs.yaml
\`\`\`

---

## ðŸ“¥ ÐšÐ°Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³

### ðŸªŸ Ð”Ð»Ñ Clash (ÐŸÐš: Windows/macOS/Linux)

1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ [Clash for Windows](https://github.com/Fndroid/clash_for_windows_pkg) Ð¸Ð»Ð¸ [Clash Verge](https://github.com/clash-verge-rev/clash-verge-rev).
2. ÐžÑ‚ÐºÑ€Ð¾Ð¹Ñ‚Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ.
3. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» **Profiles / ÐŸÑ€Ð¾Ñ„Ð¸Ð»Ð¸**.
4. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **â€œ+â€** Ð¸Ð»Ð¸ **â€œNew Profileâ€ / â€œÐ”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒâ€**.
5. Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ ÑÑÑ‹Ð»ÐºÑƒ:
   \`\`\`
   https://raw.githubusercontent.com/ASTRACAT2022/VPN-FREE-astra.net-V1/refs/heads/main/website/configs/raw_configs.yaml
   \`\`\`
6. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **â€œDownloadâ€ / â€œÐ—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒâ€**, Ð·Ð°Ñ‚ÐµÐ¼ **â€œSet as Activeâ€ / â€œÐÐºÑ‚Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒâ€**.

---

### ðŸ“± Ð”Ð»Ñ Karing VPN (Android/iOS)

1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ **Karing VPN** Ð¸Ð· Google Play Ð¸Ð»Ð¸ App Store.
2. ÐŸÐµÑ€ÐµÐ¹Ð´Ð¸Ñ‚Ðµ Ð² Ñ€Ð°Ð·Ð´ÐµÐ» **è®¢é˜… / Subscription**.
3. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **æ·»åŠ è®¢é˜… / Add Subscription**.
4. Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ ÑÑÑ‹Ð»ÐºÑƒ:
   \`\`\`
   https://raw.githubusercontent.com/ASTRACAT2022/VPN-FREE-astra.net-V1/refs/heads/main/website/configs/raw_configs.yaml
   \`\`\`
5. ÐÐ°Ð·Ð¾Ð²Ð¸Ñ‚Ðµ, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: `ASTRACAT VPN`.
6. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ **ä¿å­˜ / Save**, Ð·Ð°Ñ‚ÐµÐ¼ **æ›´æ–° / Update**.

---

## â™»ï¸ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ

Ð¤Ð°Ð¹Ð» Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 10 Ð¼Ð¸Ð½ÑƒÑ‚ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ GitHub Actions.  
Ð’Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚Ðµ ÑÐ°Ð¼Ñ‹Ðµ Ð°ÐºÑ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ðµ ÑÐµÑ€Ð²ÐµÑ€Ð°.

---

**ÐŸÑ€Ð¾ÐµÐºÑ‚ ASTRACAT Ð¾Ñ‚ ÑÐ¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð° Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹Ð¼ ÐºÐ¾Ð´Ð¾Ð¼. ÐÐµ Ð¿Ñ€Ð¾Ð´Ð°Ñ‘Ñ‚ÑÑ. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾.**
EOF

      - name: Commit and push changes
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
          git pull --rebase
          git add website/configs/ README.md
          git commit -m "ðŸš€ ASTRACAT â€” Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾ 10 Ð¼Ð¸Ð½ÑƒÑ‚ Ð½Ð°Ð·Ð°Ð´" || echo "No changes to commit"
          git push
